(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{294:function(e,t,a){e.exports=a(331)},299:function(e,t,a){},331:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),i=(a(299),a(17)),l=a.n(i),s=a(24),u=a(35),m=a(244),p=a(357),f=a(358),d=a(284),b=a(20),v=a(359),h=a(125),E=a.n(h),g=a(146),x=a.n(g),w=a(356),y=a(251),j=a(252),O=a(72),k=a(276),N=a.n(k),R=new(a(277).a)("nhi-open-data-tool");R.version(1).stores({cache:"++id,key"});var S={get:function(){var e=Object(s.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.table("cache").where({key:t}).toArray();case 2:if(0!==(a=e.sent).length){e.next=5;break}return e.abrupt("return");case 5:if(a[0].expiredAt&&!(a[0].expiredAt<Date.now())){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",a[0].data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),set:function(){var e=Object(s.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.table("cache").where({key:t}).toArray();case 2:if(n=e.sent,r=Date.now()+216e5,0!==n.length){e.next=9;break}return e.next=7,R.table("cache").add({key:t,data:a,expiredAt:r});case 7:e.next=11;break;case 9:return e.next=11,R.table("cache").update(n[0].id,{key:t,data:a,expiredAt:r});case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},A="https://raw.githubusercontent.com/chunyenHuang/nhi-open-data-tool/master/data/latest";function B(e){return W.apply(this,arguments)}function W(){return(W=Object(s.a)(l.a.mark((function e(t){var a,n,r,c,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:{},t=t.endsWith(".json")?t:"".concat(t,".json"),a="api:".concat(t),e.next=5,S.get(a);case 5:if(!(n=e.sent)){e.next=8;break}return e.abrupt("return",n);case 8:return e.next=10,fetch("".concat(A,"/").concat(t));case 10:return r=e.sent,e.next=13,r.json();case 13:return c=e.sent,e.next=16,S.set(a,c);case 16:return e.abrupt("return",c);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=function(e){return"https://www.nhi.gov.tw/Query4Pic/".concat(e,".jpg")},P=a(278),_=a.n(P);function z(e){var t=e.title,a=e.data,n=e.columns,c=e.options,o=Object.assign({enableNestedDataAccess:".",pagination:!0,responsive:"standard",rowsPerPageOptions:[5,10,20,50,100],rowsPerPage:5,filterType:"dropdown",fixedHeader:!0,resizableColumns:!1,selectableRows:"none",print:!0,download:!0,downloadOptions:{filename:"".concat(t,".csv"),separator:","},expandableRows:!1,isRowExpandable:function(){return!1},isRowSelectable:function(){return!1},onRowClick:function(e,t){var n=a[t.dataIndex];console.log(n)}},c);return r.a.createElement(_.a,{title:t,data:a,columns:n,options:o})}var M=a(173),C=a(258);var D=function(e){var t=e.url,a=void 0===t?"":t,n=e.title,c=void 0===n?"Visit":n,o=e.tooltip,i=e.icon,l=e.className,s=e.variant,u=void 0===s?"outlined":s,m=e.target,p=void 0===m?"_self":m;if("string"!==typeof a)return null;var f=!a||""===a||!a.startsWith("http")&&!a.startsWith("/"),d=o||(f?"":c);return i?r.a.createElement(C.a,{title:d},r.a.createElement("span",null,r.a.createElement(M.a,{className:l,disabled:f,"aria-label":c,target:"_blank",href:a,size:"small"},i))):a.startsWith("/")?r.a.createElement(j.a,{className:l,variant:u,color:"primary",size:"small",to:a,disabled:f,component:x.a,target:p},c):r.a.createElement(j.a,{className:l,variant:u,color:"primary",size:"small",target:"_blank",href:a,disabled:f},c)};function F(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a,n){var r=t?-1:1;return a[e]===n[e]?0:r*G(a[e],n[e])}}var G=function(e,t){var a,n,r=1,c=0,o=0,i=String.alphabet;function l(e,t,n){if(n){for(a=t;(n=l(e,a))<76&&n>65;)++a;return+e.slice(t-1,a)}return(n=i&&i.indexOf(e.charAt(t)))>-1?n+76:(n=e.charCodeAt(t)||0)<45||n>127?n:n<46?65:n<48?n-1:n<58?n+18:n<65?n-11:n<91?n+11:n<97?n-37:n<123?n+5:n-63}if((e+="")!=(t+=""))for(;r;)if(n=l(e,c++),r=l(t,o++),n<76&&r<76&&n>66&&r>66&&(n=l(e,c,c),r=l(t,o,c=a),o=a),n!=r)return n<r?-1:1;return 0},I=a(360),U=Object(m.a)((function(e){return{img:{maxHeight:100,maxWidth:"100%"}}}));var J=function(e){var t=e.value,a=void 0===t?"":t,n=e.alt,c=void 0===n?"-":n,o=U();return r.a.createElement(I.a,{container:!0,justify:"center",align:"center"},a&&r.a.createElement("img",{src:a,alt:c,className:o.img}))};function T(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("\u81ea\u4ed8\u5dee\u984d\u54c1\u9805");case 2:t=e.sent,c(t.sort(F("\u4e2d\u6587")).sort(F("\u5206\u985e")).sort(F("\u985e\u5225")));case 4:case"end":return e.stop()}}),e)})))()}),[]);var o=[{name:"\u4ee3\u78bc",label:"\u5716\u7247",options:{filter:!1,sort:!1,customBodyRender:function(e){return r.a.createElement(J,{value:H(e)})}}},{name:"\u985e\u5225",label:"\u985e\u5225"},{name:"\u5206\u985e",label:"\u5206\u985e"},{name:"\u4ee3\u78bc",label:"\u4ee3\u78bc",options:{filter:!1}},{name:"\u4e2d\u6587",label:"\u4e2d\u6587",options:{filter:!1}},{name:"\u82f1\u6587",label:"\u82f1\u6587",options:{filter:!1,display:!1}},{name:"\u8a31\u53ef\u8b49\u5b57\u865f",label:"\u8a31\u53ef\u8b49\u5b57\u865f",options:{filter:!1,display:!1}},{name:"\u5065\u4fdd\u7d66\u4ed8\u9ede\u6578",label:"\u5065\u4fdd\u7d66\u4ed8\u9ede\u6578",options:{filter:!1}},{name:"\u6700\u4f4e\u81ea\u4ed8\u5dee\u984d",label:"\u6700\u4f4e\u81ea\u4ed8\u5dee\u984d",options:{filter:!1}},{name:"\u6700\u9ad8\u81ea\u4ed8\u5dee\u984d",label:"\u6700\u9ad8\u81ea\u4ed8\u5dee\u984d",options:{filter:!1}},{name:"\u4ee3\u78bc",label:" ",options:{filter:!1,sort:!1,customBodyRender:function(e){return r.a.createElement(D,{url:"/item/".concat(e),title:"\u67e5\u770b",target:"_blank"})}}}];return r.a.createElement(z,{title:"\u5168\u90e8\u81ea\u4ed8\u5dee\u984d\u91ab\u7642\u7279\u6750",data:a,columns:o})}var L=a(126);function Q(e){var t=e.id,a=Object(n.useState)([]),c=Object(u.a)(a,2),o=c[0],i=c[1];Object(n.useEffect)((function(){t&&Object(s.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("\u81ea\u4ed8\u5dee\u984d\u54c1\u9805\u6536\u8cbb/\u54c1\u9805\u4ee3\u78bc/".concat(t));case 2:if((a=e.sent)[0]){e.next=5;break}return e.abrupt("return");case 5:i(a.sort(F("\u7279\u7d04\u9662\u6240\u6536\u8cbb")));case 6:case"end":return e.stop()}}),e)})))()}),[t]);return r.a.createElement(z,{title:"\u5404\u5730\u5340\u6a5f\u69cb\u7279\u6750\u6536\u8cbb",data:o,columns:[{name:"\u5206\u5340\u696d\u52d9\u7d44",label:"\u5206\u5340\u696d\u52d9\u7d44",options:{display:!1}},{name:"\u5c31\u91ab\u9662\u6240\u7e23\u5e02\u5225",label:"\u5730\u5340"},{name:"\u7279\u7d04\u985e\u5225",label:"\u7279\u7d04\u985e\u5225"},{name:"\u91ab\u4e8b\u6a5f\u69cb\u540d\u7a31",label:"\u91ab\u4e8b\u6a5f\u69cb\u540d\u7a31"},{name:"\u91ab\u4e8b\u6a5f\u69cb\u7c21\u7a31",label:"\u91ab\u4e8b\u6a5f\u69cb\u7c21\u7a31",options:{filter:!1,display:!1}},{name:"\u91ab\u4e8b\u6a5f\u69cb\u4ee3\u78bc",label:"\u91ab\u4e8b\u6a5f\u69cb\u4ee3\u78bc",options:{filter:!1,display:!1}},{name:"\u5065\u4fdd\u7d66\u4ed8\u9ede\u6578",label:"\u5065\u4fdd\u7d66\u4ed8\u9ede\u6578",options:{filter:!1,display:!1}},{name:"\u7279\u7d04\u9662\u6240\u6536\u8cbb",label:"\u81ea\u4ed8\u5dee\u984d",options:{filter:!1}}]})}function V(e){var t=e.funcName,a=e.id,c=Object(n.useState)([]),o=Object(u.a)(c,2),i=o[0],m=o[1];Object(n.useEffect)((function(){t&&Object(s.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("\u81ea\u4ed8\u5dee\u984d\u54c1\u9805");case 2:a=e.sent,m(a.filter((function(e){return e["\u5206\u985e"]===t})).sort(F("\u6700\u4f4e\u81ea\u4ed8\u5dee\u984d")));case 4:case"end":return e.stop()}}),e)})))()}),[t]);var p=[{name:"\u4ee3\u78bc",label:" ",options:{filter:!1,sort:!1,customBodyRender:function(e){return e===a?"\u672c\u9801\u7522\u54c1":""}}},{name:"\u4ee3\u78bc",label:"\u5716\u7247",options:{filter:!1,sort:!1,customBodyRender:function(e){return r.a.createElement(J,{value:H(e)})}}},{name:"\u4ee3\u78bc",label:"\u4ee3\u78bc",options:{filter:!1}},{name:"\u4e2d\u6587",label:"\u4e2d\u6587",options:{filter:!1}},{name:"\u82f1\u6587",label:"\u82f1\u6587",options:{filter:!1,display:!1}},{name:"\u8a31\u53ef\u8b49\u5b57\u865f",label:"\u8a31\u53ef\u8b49\u5b57\u865f",options:{filter:!1,display:!1}},{name:"\u5065\u4fdd\u7d66\u4ed8\u9ede\u6578",label:"\u5065\u4fdd\u7d66\u4ed8\u9ede\u6578",options:{filter:!1}},{name:"\u6700\u4f4e\u81ea\u4ed8\u5dee\u984d",label:"\u6700\u4f4e\u81ea\u4ed8\u5dee\u984d",options:{filter:!1}},{name:"\u6700\u9ad8\u81ea\u4ed8\u5dee\u984d",label:"\u6700\u9ad8\u81ea\u4ed8\u5dee\u984d",options:{filter:!1}},{name:"\u4ee3\u78bc",label:" ",options:{filter:!1,sort:!1,customBodyRender:function(e){return r.a.createElement(D,{url:"/item/".concat(e),title:"\u67e5\u770b",target:"_blank"})}}}];return r.a.createElement(z,{title:"\u76f8\u540c\u529f\u80fd\u5206\u985e\uff1a".concat(t),data:i,columns:p})}function $(e){var t=e.id,a=Object(n.useState)([]),c=Object(u.a)(a,2),o=c[0],i=c[1];Object(n.useEffect)((function(){t&&Object(s.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("\u81ea\u4ed8\u5dee\u984d\u91ab\u6750\u5c0d\u61c9\u5065\u4fdd\u5168\u984d\u7d66\u4ed8\u54c1\u9805");case 2:a=e.sent,i(a.filter((function(e){return e["\u81ea\u4ed8\u5dee\u984d\u54c1\u9805\u4ee3\u78bc"].includes(t)})).sort(F("\u652f\u4ed8\u9ede\u6578",!0)));case 4:case"end":return e.stop()}}),e)})))()}),[t]);var m=[{name:"\u4ee3\u78bc",label:"\u5716\u7247",options:{filter:!1,sort:!1,customBodyRender:function(e){return r.a.createElement(J,{value:H(e)})}}},{name:"\u4ee3\u78bc",label:"\u4ee3\u78bc",options:{filter:!1}},{name:"\u540d\u7a31",label:"\u540d\u7a31",options:{filter:!1}},{name:"\u8a31\u53ef\u8b49\u5b57\u865f",label:"\u8a31\u53ef\u8b49\u5b57\u865f",options:{filter:!1,display:!1}},{name:"\u85e5\u5546\u540d\u7a31",label:"\u85e5\u5546\u540d\u7a31"},{name:"\u652f\u4ed8\u9ede\u6578",label:"\u5065\u4fdd\u7d66\u4ed8\u9ede\u6578",options:{filter:!1}}];return r.a.createElement(z,{title:"\u5c0d\u61c9\u5065\u4fdd\u5168\u984d\u7d66\u4ed8\u54c1\u9805",data:o,columns:m})}var q=Object(m.a)((function(e){return{container:{flex:1,padding:e.spacing(4)},space:{height:e.spacing(4)},img:{width:"100%"}}}));var K=[{title:"\u9996\u9801",path:"/",exact:!0,component:function(){return r.a.createElement("div",null,r.a.createElement(T,null))},hideFromMenu:!1},{title:"",path:"/item/:id",exact:!0,component:function(e){var t=e.id,a=e.match,c=q(),o=Object(n.useState)(),i=Object(u.a)(o,2),m=i[0],p=i[1],f=Object(n.useState)(),d=Object(u.a)(f,2),b=d[0],v=d[1];return Object(n.useEffect)((function(){if(t)p(t);else if(a){var e=a.params.id;p(e)}}),[t,a]),Object(n.useEffect)((function(){m&&Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("\u81ea\u4ed8\u5dee\u984d\u54c1\u9805");case 2:t=e.sent,a=t.find((function(e){return e["\u4ee3\u78bc"]===m})),console.log(a),v(a);case 7:case"end":return e.stop()}}),e)})))()}),[m]),b?r.a.createElement(E.a,{title:"".concat(b["\u4e2d\u6587"])},r.a.createElement("div",null,r.a.createElement(L.a,null,r.a.createElement(I.a,{container:!0},r.a.createElement(I.a,{container:!0,item:!0,xs:12,sm:2,md:4,alignItems:"center",justify:"center",className:c.container},r.a.createElement("img",{src:H(m),alt:"test",className:c.img})),r.a.createElement(I.a,{item:!0,xs:12,sm:10,md:8,className:c.container},r.a.createElement(O.a,{variant:"h5",component:"h1"},b["\u4e2d\u6587"]),r.a.createElement(O.a,{variant:"subtitle1",component:"h5"},b["\u82f1\u6587"]),r.a.createElement(O.a,{variant:"body2",component:"p"},"\u4ee3\u78bc\uff1a",b["\u4ee3\u78bc"]),r.a.createElement(O.a,{variant:"body2",component:"p"},"\u985e\u5225\uff1a",b["\u985e\u5225"]," / ",b["\u5206\u985e"]),r.a.createElement(O.a,{variant:"body2",component:"p"},"\u8a31\u53ef\u8b49\u5b57\u865f\uff1a",b["\u8a31\u53ef\u8b49\u5b57\u865f"]),r.a.createElement(O.a,{variant:"body2",component:"p"},"\u5065\u4fdd\u7d66\u4ed8\u9ede\u6578\uff1a",b["\u5065\u4fdd\u7d66\u4ed8\u9ede\u6578"]),r.a.createElement(O.a,{variant:"body2",component:"p"},"\u81ea\u4ed8\u5dee\u984d\u7bc4\u570d\uff1a",b["\u6700\u4f4e\u81ea\u4ed8\u5dee\u984d"]," - ",b["\u6700\u9ad8\u81ea\u4ed8\u5dee\u984d"])))),r.a.createElement("div",{className:c.space}),r.a.createElement(Q,{id:m}),r.a.createElement("div",{className:c.space}),r.a.createElement(V,{id:m,funcName:b["\u5206\u985e"]}),r.a.createElement("div",{className:c.space}),r.a.createElement($,{id:m}))):null},hideFromMenu:!0}],X=a(283),Y=a.n(X);var Z=function(e){var t=e.url,a=e.title,n=void 0===a?"GitHub":a,c=e.className,o=t?t.startsWith("https://github.com/")?t:"https://github.com/".concat(t):void 0;return r.a.createElement(D,{className:c,disabled:!0,url:o,title:n,icon:r.a.createElement(Y.a,null)})},ee=Object(m.a)((function(e){return{appBar:{},title:{marginRight:e.spacing(1)},space:{flexGrow:1},button:{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}));var te=function(){var e=ee(),t=Object(n.useState)(),a=Object(u.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,S.get("lastUpdatedAt");case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(w.a,{position:"fixed",color:"default",className:e.appBar},r.a.createElement(y.a,{variant:"dense"},r.a.createElement(O.a,{variant:"h6",className:e.title},"\u67e5\u81ea\u4ed8\u5dee\u984d\u91ab\u7642\u7279\u6750"),K.filter((function(e){return!e.hideFromMenu})).map((function(e){var t=e.title,a=e.path;return r.a.createElement(j.a,{to:a,key:t,component:x.a},t)})),r.a.createElement("div",{className:e.space}),r.a.createElement(Z,{className:e.button,url:"chunyenHuang/nhi-open-data-tool"}),c&&r.a.createElement(O.a,{variant:"body2",color:"textSecondary"},"\u8cc7\u6599\u66f4\u65b0\u65bc ",N()(c).fromNow())))},ae=Object(m.a)((function(e){return{main:{display:"flex",padding:e.spacing(4)},spinner:{position:"absolute",top:150,left:"calc(50% - 20px)"},container:{paddingTop:48,flexGrow:1}}}));var ne=function(e){var t=ae(),a=Object(n.useState)(!0),c=Object(u.a)(a,2),o=c[0],i=c[1];return Object(n.useEffect)((function(){Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("report");case 2:return t=e.sent,a=t.lastUpdatedAt,e.next=6,S.set("lastUpdatedAt",a);case 6:i(!0);case 7:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(f.a,{className:t.main},r.a.createElement(d.a,{basename:"/"},r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(p.a,{className:t.spinner})},r.a.createElement(v.a,null),r.a.createElement(te,null),!o&&r.a.createElement(p.a,{className:t.spinner}),o&&r.a.createElement("main",{className:t.container},r.a.createElement(b.Switch,null,K.map((function(e){return r.a.createElement(b.Route,{path:e.path,exact:e.exact,key:e.path,render:function(t){return r.a.createElement(E.a,{title:"".concat(e.title)},r.a.createElement(e.component,t))}})})),r.a.createElement(b.Redirect,{to:"/"}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[294,1,2]]]);
//# sourceMappingURL=main.60b6e5aa.chunk.js.map